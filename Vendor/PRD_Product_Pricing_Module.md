# 商品定价模块产品需求文档

## 1. 文档概述

### 1.1 文档目的
本文档详细描述了农资商城厂家管理后台中商品定价模块的需求、设计和实现方案，旨在为开发团队提供清晰的功能指导和验收标准。

### 1.2 术语定义
- **商品定价**：管理商品销售价格和上下架状态的功能模块
- **审核通过商品**：经过平台审核通过的商品，包括商家自主创建和从产品库选择的商品
- **产品库商品**：平台维护的标准化商品信息，选择后无需再次审核
- **价格保护**：系统自动隔离低于本地基准价的外部卖家商品的机制

## 2. 功能需求

### 2.1 核心功能

| 功能点 | 详细描述 | 优先级 |
|-------|---------|--------|
| 商品筛选 | 支持按商品名称、条码、类别、产地、状态等条件筛选 | 高 |
| 价格管理 | 支持单个商品价格编辑和批量价格设置 | 高 |
| 上下架管理 | 支持单个商品和批量商品的上下架操作 | 高 |
| 批量操作 | 支持批量上架、批量下架、强制下架功能 | 中 |
| 商品添加 | 支持从可售商品池中添加商品到定价列表 | 中 |
| 区域选择 | 支持为商品设置可售区域 | 中 |
| 价格保护 | 提供价格保护提示和设置功能 | 低 |

### 2.2 商品范围
- 仅显示**审核通过**的商品
- 包含两种来源的商品：
  - 商家自主创建并通过审核的商品
  - 从平台产品库选择的商品（无需再次审核）

### 2.3 数据字段

| 字段名称 | 数据类型 | 必填 | 说明 |
|---------|---------|------|------|
| 商品编号 | 字符串 | 是 | 系统生成的唯一标识符 |
| 商品名称 | 字符串 | 是 | 商品的中文名称 |
| 品牌 | 字符串 | 是 | 商品所属品牌 |
| 商品条码 | 字符串 | 是 | 商品的EAN-13条码 |
| 类别 | 字符串 | 是 | 商品所属类别（种子、化肥、农药、农具） |
| 规格/单位 | 字符串 | 是 | 商品的规格和计量单位 |
| 建议零售价 | 数值 | 是 | 平台建议的零售价格 |
| 我的售价 | 数值 | 是 | 商家设置的销售价格 |
| 含佣金价 | 数值 | 是 | 包含平台佣金的销售价格 |
| 含税供货价 | 数值 | 是 | 包含税费的供货价格 |
| 可销库存 | 数值 | 是 | 当前可销售的商品库存 |
| 状态 | 枚举 | 是 | 商品状态（在售/未上架） |

## 3. 用户界面设计

### 3.1 整体布局

```
┌─────────────────────────────────────────────────────────────────┐
│                     顶部导航栏                                   │
│                                                                 │
│  商品定价 - 管理商品价格和上下架状态                              │
│                                                                 │
│  [新增商品] [产品库选择]                                         │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                     搜索筛选区域                                 │
│                                                                 │
│  商品名称: [___________] 商品条码: [___________]                 │
│  商品类别: [下拉选择]   产地: [___________]                      │
│                                                                 │
│  状态: ( )全部 ( )在售 ( )未上架                                │
│  库存状况: ( )缺货                                              │
│                                                                 │
│  [查询] [重置] [添加商品]                                        │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                     批量操作区域                                 │
│                                                                 │
│  [批量上架] [批量下架] [强制下架]                                │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                     商品定价表格                                 │
│                                                                 │
│  序号  操作  商品编号  商品名称  品牌  条码  类别  规格  零售价    │
│  1     [操作] SZ001   玉米种子   种业  ...    种子  50kg  120    │
│  2     [操作] HF002   复合肥     农化  ...    化肥  50kg  200    │
│  ...                                                           │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                     价格保护提示                                 │
│                                                                 │
│  开启价格保护：自动隔离所有价格低于商品定价XX%的用户当前区域的商  │
│  品。                                                            │
│                                                                 │
│  用户当前区域：山东省济南市历下区                                 │
│  隔离情况：已为您在该区域开启价格保护                             │
│  ...                                                           │
└─────────────────────────────────────────────────────────────────┘
```

### 3.2 核心界面元素

#### 3.2.1 搜索筛选区域
- 提供多维度搜索条件
- 支持精确和模糊搜索
- 包含状态筛选和库存筛选

#### 3.2.2 商品定价表格
- 清晰展示商品基本信息
- 直接在表格中编辑价格
- 操作列提供快速上下架和价格设置功能
- 状态列使用颜色区分在售和未上架状态

#### 3.2.3 批量操作按钮
- 批量上架：将选中的未上架商品变为在售状态
- 批量下架：将选中的在售商品变为未上架状态
- 强制下架：将选中的商品强制变为未上架状态（用于紧急情况）

#### 3.2.4 添加商品模态框
- 支持选择可售区域
- 支持搜索和选择商品
- 提供商品基本信息预览

### 3.3 状态管理

| 状态 | 视觉表示 | 说明 |
|------|---------|------|
| 在售 | 绿色标签 | 商品可正常销售 |
| 未上架 | 灰色标签 | 商品暂不可销售 |

## 4. 功能流程

### 4.1 商品定价流程

```
开始 → 进入商品定价页面 → 筛选商品 → 编辑价格 → 保存价格 → 设置上下架状态 → 结束
```

### 4.2 批量操作流程

```
开始 → 选择商品 → 点击批量操作按钮 → 确认操作 → 系统处理 → 结束
```

### 4.3 添加商品流程

```
开始 → 点击添加商品 → 选择可售区域 → 搜索并选择商品 → 确认添加 → 结束
```

## 5. 技术实现

### 5.1 前端技术栈
- HTML5/CSS3
- JavaScript (ES6+)
- Tailwind CSS
- Font Awesome

### 5.2 后端接口需求

| 接口名称 | 方法 | 功能描述 |
|---------|------|---------|
| 获取商品列表 | GET | 获取审核通过的商品列表 |
| 搜索商品 | GET | 根据条件搜索商品 |
| 更新商品价格 | POST | 更新商品销售价格 |
| 更新商品状态 | POST | 更新商品上下架状态 |
| 批量更新状态 | POST | 批量更新商品上下架状态 |
| 添加商品 | POST | 添加商品到定价列表 |

### 5.3 数据存储
- 商品基本信息：存储在商品表中
- 商品价格信息：存储在商品价格表中
- 商品状态信息：存储在商品表或状态表中
- 可售区域信息：存储在商品区域关系表中

## 6. 验收标准

### 6.1 功能验收
1. 仅显示审核通过的商品
2. 支持按名称、条码、类别、产地等条件搜索
3. 支持单个商品价格编辑
4. 支持单个商品上下架操作
5. 支持批量上架、批量下架、强制下架功能
6. 支持添加商品并选择可售区域
7. 显示价格保护提示信息

### 6.2 界面验收
1. 界面布局清晰，符合设计规范
2. 响应式设计，适配不同屏幕尺寸
3. 操作流程顺畅，用户体验良好
4. 视觉效果符合系统整体风格

### 6.3 性能验收
1. 页面加载时间不超过2秒
2. 搜索响应时间不超过1秒
3. 批量操作响应时间不超过3秒

## 7. 风险评估

### 7.1 功能风险
- 商品数据同步延迟可能导致定价页面显示不准确
- 批量操作可能影响大量商品，需要添加确认机制

### 7.2 技术风险
- 前端性能问题可能影响用户体验
- 后端接口稳定性可能影响功能正常使用

### 7.3 运营风险
- 价格设置不当可能影响商品销售
- 上下架操作失误可能导致商品无法正常销售

## 8. 未来扩展

### 8.1 功能扩展
- 支持价格历史记录查询
- 支持价格批量导入导出
- 支持价格策略设置（如促销价、会员价等）
- 支持价格预警功能

### 8.2 技术扩展
- 实现实时价格更新
- 接入第三方价格监测服务
- 实现智能价格建议功能

## 9. 文档变更记录

| 版本 | 变更日期 | 变更内容 | 变更人 |
|------|---------|---------|--------|
| 1.0 | 2024-01-15 | 初始版本，定义商品定价模块需求 | 产品经理 |
| 1.1 | 2024-01-16 | 补充功能流程和验收标准 | 产品经理 |
| 1.2 | 2024-01-17 | 完善技术实现和风险评估 | 技术负责人 |
