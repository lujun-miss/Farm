# 商品发布流程产品需求文档

## 1. 文档概述

### 1.1 文档目的
本文档详细描述了农资商城厂家管理后台的商品发布流程，包括两种发布模式（新品审核模式和快速上架模式）的功能设计、用户体验和技术实现。

### 1.2 术语定义
- **新品审核模式**：商家手动录入全部商品信息，提交后需经过平台审核才能上架销售
- **快速上架模式**：从产品库选择已有商品，仅需设置价格即可快速上架，无需审核
- **产品库**：平台维护的标准化商品信息数据库，包含商品的完整资质和描述信息

## 2. 功能需求

### 2.1 核心功能

| 功能点 | 新品审核模式 | 快速上架模式 | 说明 |
|-------|------------|------------|------|
| 商品信息录入 | ✅ 全部字段可编辑 | ❌ 仅价格可编辑 | 快速上架模式下商品信息从产品库加载 |
| 资质文件上传 | ✅ 必需 | ❌ 不需要 | 产品库商品已包含完整资质 |
| 商品图片上传 | ✅ 必需 | ❌ 不需要 | 产品库商品已包含图片 |
| 包装规格设置 | ✅ 全部可编辑 | ❌ 仅价格可编辑 | 快速上架模式下仅需设置销售价格 |
| 草稿保存 | ✅ 支持 | ❌ 不支持 | 快速上架流程简化 |
| 提交审核 | ✅ 必需 | ❌ 不需要 | 快速上架模式下跳过审核流程 |
| 直接上架 | ❌ 不支持 | ✅ 支持 | 设置价格后直接上架销售 |

### 2.2 模式切换机制
- **新品审核模式**：默认进入的发布模式，用于发布产品库中不存在的商品
- **快速上架模式**：通过以下方式触发：
  - 从"产品库选择"功能进入发布页面
  - URL参数包含有效的`productId`

## 3. 用户界面设计

### 3.1 模式视觉区分

#### 3.1.1 新品审核模式
- **界面状态**：所有表单字段可编辑
- **按钮配置**：
  - 保存草稿（灰色按钮）
  - 提交审核（蓝色按钮，主操作）
- **提示信息**：无特殊提示条

#### 3.1.2 快速上架模式
- **界面状态**：
  - 大部分字段显示为灰色只读状态
  - 仅价格相关字段可编辑
- **按钮配置**：
  - 隐藏"保存草稿"按钮
  - 保存价格并上架（绿色按钮，主操作）
- **提示信息**：
  - 显示绿色提示条
  - 内容："快速上架模式：商品信息已从产品库加载，除价格外其他信息不可修改，无需审核直接上架。"

### 3.2 关键UI元素设计

#### 3.2.1 模式指示器
```html
<div id="mode-indicator" class="bg-green-50 border-l-4 border-green-400 p-4 mb-6">
    <div class="flex">
        <div class="flex-shrink-0">
            <i class="fas fa-check-circle text-green-400"></i>
        </div>
        <div class="ml-3">
            <p class="text-sm text-green-700">
                <strong class="font-medium">快速上架模式：</strong>
                商品信息已从产品库加载，除价格外其他信息不可修改，无需审核直接上架。
            </p>
        </div>
    </div>
</div>
```

#### 3.2.2 提交按钮设计
- **新品审核模式**：蓝色按钮，纸飞机图标，文本"提交审核"
- **快速上架模式**：绿色按钮，对勾图标，文本"保存价格并上架"

### 3.3 字段状态管理
- **只读字段**：添加`bg-gray-100`类，移除焦点样式
- **可编辑字段**：保持正常输入框样式
- **选择框**：禁用状态下同样添加灰色背景

## 4. 用户体验设计

### 4.1 操作流程

#### 4.1.1 新品审核模式流程
1. 进入商品发布页面
2. 填写所有必填商品信息
3. 上传资质文件和商品图片
4. 设置包装规格和价格
5. 选择保存草稿或提交审核
6. 提交后等待平台审核
7. 审核通过后商品上架

#### 4.1.2 快速上架模式流程
1. 从产品库选择商品
2. 系统自动跳转到发布页面并加载商品信息
3. 仅需设置销售价格
4. 点击"保存价格并上架"
5. 商品立即上架销售（无需审核）

### 4.2 用户引导
- 提供清晰的模式提示信息
- 只读字段使用视觉反馈明确指示
- 按钮文本和颜色直接反映操作后果
- 操作成功后提供明确的提示信息

## 5. 技术实现

### 5.1 核心逻辑

```javascript
// 从URL参数判断是否为快速上架模式
const productId = urlParams.get('productId');
if (productId) {
    // 加载产品库商品信息
    const product = productLibrary.find(p => p.id.toString() === productId);
    
    if (product) {
        // 填充商品信息
        // 设置字段只读状态
        setFieldsReadOnly(true);
    }
}

// 设置字段只读状态函数
function setFieldsReadOnly(readOnly) {
    // 设置只读字段列表
    const readOnlyFields = [/* 字段ID列表 */];
    
    // 设置字段状态和样式
    readOnlyFields.forEach(fieldId => {
        const field = document.getElementById(fieldId);
        if (field) {
            field.readOnly = readOnly;
            field.classList.toggle('bg-gray-100', readOnly);
        }
    });
    
    // 切换模式指示器
    modeIndicator.classList.toggle('hidden', !readOnly);
    
    // 切换按钮状态和样式
    updateButtonState(readOnly);
}
```

### 5.2 技术要点
- 使用URL参数传递商品来源信息
- 动态切换界面元素的只读状态和样式
- 基于模式调整按钮行为和视觉样式
- 提供明确的用户反馈机制

## 6. 测试用例

### 6.1 功能测试

| 测试场景 | 预期结果 |
|---------|---------|
| 直接访问发布页面 | 进入新品审核模式，所有字段可编辑 |
| 从产品库选择商品进入 | 进入快速上架模式，仅价格可编辑 |
| 快速上架模式下设置价格并提交 | 商品直接上架，无需审核 |
| 新品审核模式下提交完整信息 | 商品进入审核流程 |

### 6.2 边界测试

| 测试场景 | 预期结果 |
|---------|---------|
| 快速上架模式下价格为空 | 提示用户设置有效价格 |
| 新品审核模式下必填项为空 | 提示用户填写完整信息 |
| 产品库商品不存在 | 显示错误提示，进入新品审核模式 |

## 7. 设计决策说明

### 7.1 为什么要区分两种模式
- **提高效率**：快速上架模式减少了80%的信息录入工作
- **降低错误**：产品库商品信息经过平台验证，减少商家录入错误
- **保证质量**：新品审核机制确保平台商品信息的完整性和合规性
- **简化流程**：针对不同场景提供最合适的操作流程

### 7.2 界面设计决策
- **颜色区分**：使用蓝色代表审核流程，绿色代表快速流程
- **按钮优化**：快速模式下隐藏次要按钮，减少用户选择
- **状态提示**：使用醒目的提示条明确当前模式
- **视觉反馈**：只读字段使用灰色背景明确指示

## 8. 未来优化建议

1. **批量快速上架**：支持从产品库选择多个商品同时快速上架
2. **价格模板**：允许商家设置常用价格策略模板
3. **历史价格记录**：记录商品价格变动历史
4. **智能价格建议**：基于市场数据提供价格建议
5. **移动端适配**：优化移动端发布流程体验

## 9. 文档变更记录

| 版本 | 变更日期 | 变更内容 | 变更人 |
|------|---------|---------|-------|
| 1.0  | 2024-01-15 | 初始版本，定义两种发布模式 | 产品团队 |
| 1.1  | 2024-01-16 | 优化界面设计，增加模式指示器 | 产品团队 |
| 1.2  | 2024-01-17 | 完善技术实现细节 | 技术团队 |
