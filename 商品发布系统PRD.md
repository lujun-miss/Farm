# 商品发布系统产品需求文档 (PRD)

## 1. 产品概述

### 1.1 产品背景
随着农业电商平台业务的发展，商品信息的规范化管理和高效发布成为平台运营的关键。目前平台存在商品信息重复创建、审核流程不清晰、商品库复用性差等问题。为了提升商家（厂家和代理商）的商品发布效率，规范商品信息管理，特开发此商品发布系统。

### 1.2 产品目标
- 实现商品信息的标准化建档和管理
- 建立商品唯一性校验机制，避免重复创建
- 构建平台商品库，支持商品信息复用
- 优化商品发布流程，提升发布效率
- 建立完善的商品审核机制，确保商品信息合规性

### 1.3 适用范围
本系统适用于平台管理员、厂家用户和代理商用户，用于商品信息的创建、审核、管理和发布。

## 2. 用户角色与权限

| 用户角色 | 主要职责 | 权限范围 |
|---------|---------|---------|
| 平台管理员 | 商品审核、商品库管理 | 审核所有商品、管理平台商品库、查看商品统计 |
| 厂家用户 | 创建商品、管理自有商品 | 创建/编辑/删除自有商品、提交审核、查看审核状态 |
| 代理商用户 | 创建商品、管理自有商品 | 创建/编辑/删除自有商品、提交审核、查看审核状态 |

## 3. 用户故事

### 3.1 商品创建与发布
- **作为** 厂家用户
- **我希望** 能够创建新商品并提交平台审核
- **以便** 我的商品能够在平台上合法合规地销售

### 3.2 商品库复用
- **作为** 代理商用户
- **我希望** 能够从平台商品库中引用已审核通过的商品
- **以便** 快速发布商品，避免重复创建相同信息

### 3.3 商品唯一性校验
- **作为** 平台用户
- **我希望** 在创建商品时系统能自动校验唯一性
- **以便** 避免创建重复的商品信息，保持平台商品库的规范性

### 3.4 商品审核管理
- **作为** 平台管理员
- **我希望** 能够审核商家提交的商品信息
- **以便** 确保平台商品信息的真实性和合规性

### 3.5 多规格包装管理
- **作为** 商家用户
- **我希望** 能够为同一商品创建多种包装规格
- **以便** 满足不同客户的购买需求

## 4. 功能需求

### 4.1 商品发布方式
- **手动录入**：商家手动填写完整商品信息
- **扫码录入**：通过扫描商品条码自动获取商品信息，补充完善后发布
- **拷贝商品**：从已有商品复制信息，修改部分内容后发布
- **导入商品**：从采购订单或其他系统导入商品信息
- **铺货管理**：批量将商品铺到下游商户店铺

### 4.2 商品唯一性校验
- **校验维度**：基于「产品名称+品牌+规格+生产厂家」进行唯一性校验
- **校验时机**：商品提交审核时自动校验
- **错误提示**：当检测到重复商品时，提示「已存在相同商品档案！」

### 4.3 商品库管理
- **商品入库**：审核通过的商品自动进入平台商品库
- **商品搜索**：支持按商品名称、品牌、规格、厂家等维度搜索商品库
- **商品复用**：商家可从商品库中选择商品，直接引用或修改后发布
- **商品分类**：商品库支持按商品类别进行分类管理

### 4.4 商品信息管理

#### 4.4.1 基础信息
- 商品类别：化肥、农药、种子、农具等
- 商品名称：必填项
- 品牌：必填项
- 产地：必填项
- 剂型：液体、粉剂、颗粒等
- 毒性：无毒、低毒、中等毒性、高毒等

#### 4.4.2 登记信息
- 登记证号：必填项，下拉选择已有证书
- 登记有效期：起始日期和结束日期，必填项
- 生产许可证号：必填项
- 产品标准号：选填项
- 商品条码：选填项
- 系统编号：系统自动生成，只读

#### 4.4.3 规格信息
- 基础单位：kg、g、l、ml、袋、瓶等
- 基础规格：数值型，选填项
- 规格单位：ml/瓶、g/袋、kg/袋等
- 保质期：天数，必填项

#### 4.4.4 其他信息
- 有效成分：选填项
- 含量：选填项
- 使用作物：选填项
- 防治对象：选填项
- 使用方法：选填项，多行文本
- 注意事项：选填项，多行文本

#### 4.4.5 商品描述
- 支持文字说明和图片详情两种方式
- 文字说明：最多300字，实时显示字数统计
- 图片详情：支持上传多张图片，建议宽度800像素

### 4.5 包装规格管理
- 支持为同一商品创建多种包装规格
- 每种包装规格包含：包装类型、包装规格、商品条码、规格毛重、规格体积、建议零售价
- 提供添加、编辑、删除包装规格的功能
- 至少包含一个基础包装规格，基础包装规格不可删除

### 4.6 价格与库存管理
#### 4.6.1 价格设置
- 建议零售价：选填项
- 批发价：选填项
- 代理价：选填项
- 税率：选填项，百分比

#### 4.6.2 库存设置
- 总库存：选填项
- 安全库存：选填项
- 最小起订量：默认1，可修改
- 最大限购量：默认不限，可设置

### 4.7 资质与图片管理
#### 4.7.1 商品图片
- 主图：必填项，建议尺寸800x800像素
- 详情图：支持上传多张，用于展示商品细节
- 提供图片上传预览功能
- 支持图片排序和删除

#### 4.7.2 资质文件
- 农药登记证：必填项（针对农药类商品）
- 生产许可证：必填项
- 支持上传其他相关资质文件
- 提供资质文件上传预览功能

### 4.8 商品审核流程
1. 商家创建商品并提交审核
2. 系统自动校验商品唯一性
3. 平台管理员审核商品信息
4. 审核通过：商品进入平台商品库，可直接发布
5. 审核不通过：返回商家修改后重新提交

### 4.9 草稿管理
- 支持保存商品草稿
- 草稿可随时编辑和提交审核
- 自动保存功能，避免信息丢失

## 5. 界面设计与用户流程

### 5.1 页面布局
采用响应式设计，支持PC端和移动端访问：
- 顶部导航栏：品牌标识、用户信息、通知、退出登录
- 左侧菜单栏：功能模块导航
- 主内容区：商品发布表单和相关功能
- 底部：版权信息和系统版本

### 5.2 核心页面设计

#### 5.2.1 商品发布首页
- 页面标题：发布商品
- 主要功能：
  - 发布方式选择（手动录入、扫码录入、拷贝商品、导入商品、铺货管理）
  - 平台商品库搜索和引用
  - 返回商品列表按钮

#### 5.2.2 商品信息填写页面（四步流程）
- **步骤1：商品信息**
  - 基础信息表单
  - 登记信息表单
  - 规格信息表单
  - 其他信息表单
  - 商品描述编辑区
  - 保存草稿和下一步按钮

- **步骤2：包装规格**
  - 包装规格列表
  - 添加/编辑/删除包装规格功能
  - 上一步和下一步按钮

- **步骤3：价格库存**
  - 价格设置表单
  - 库存设置表单
  - 上一步和下一步按钮

- **步骤4：资质图片**
  - 商品图片上传区
  - 资质文件上传区
  - 保存草稿和提交审核按钮
  - 上一步按钮

### 5.3 用户流程图
```
商家登录 → 进入商品管理 → 选择发布方式 → 填写商品信息 → 校验商品唯一性 → 保存草稿/提交审核 → 平台审核 → 审核通过(商品入库)/审核不通过(修改重提)
```

## 6. 非功能需求

### 6.1 性能要求
- 商品发布表单加载时间 ≤ 2秒
- 商品唯一性校验响应时间 ≤ 1秒
- 支持同时1000个用户在线使用

### 6.2 可靠性要求
- 系统可用性 ≥ 99.9%
- 数据备份频率：每日增量备份，每周全量备份
- 数据恢复时间 ≤ 4小时

### 6.3 安全性要求
- 所有用户操作需要身份验证和授权
- 敏感数据加密存储和传输
- 防止SQL注入、XSS等常见安全漏洞
- 操作日志记录，便于审计和追溯

### 6.4 易用性要求
- 界面设计符合用户习惯，操作流程直观
- 提供必要的提示和帮助信息
- 支持表单自动保存，避免数据丢失
- 响应式设计，适配不同设备屏幕

### 6.5 可维护性要求
- 代码结构清晰，模块化设计
- 提供详细的系统文档和开发文档
- 支持功能扩展和版本升级

## 7. 数据模型

### 7.1 商品基本信息表
| 字段名 | 数据类型 | 约束 | 描述 |
|-------|---------|------|------|
| product_id | BIGINT | PRIMARY KEY | 商品ID |
| product_name | VARCHAR(255) | NOT NULL | 商品名称 |
| brand | VARCHAR(100) | NOT NULL | 品牌 |
| category | VARCHAR(50) | NOT NULL | 商品类别 |
| origin | VARCHAR(100) | NOT NULL | 产地 |
| specification | VARCHAR(100) | NOT NULL | 规格 |
| manufacturer | VARCHAR(255) | NOT NULL | 生产厂家 |
| unit | VARCHAR(20) | NOT NULL | 单位 |
| shelf_life | INT | NOT NULL | 保质期(天) |
| status | INT | NOT NULL | 状态(0-草稿,1-审核中,2-审核通过,3-审核不通过) |
| creator_role | INT | NOT NULL | 创建者角色(1-厂家,2-代理商) |
| creator_id | BIGINT | NOT NULL | 创建者ID |
| create_time | DATETIME | NOT NULL | 创建时间 |
| update_time | DATETIME | NOT NULL | 更新时间 |

### 7.2 商品包装规格表
| 字段名 | 数据类型 | 约束 | 描述 |
|-------|---------|------|------|
| packaging_id | BIGINT | PRIMARY KEY | 包装ID |
| product_id | BIGINT | FOREIGN KEY | 商品ID |
| packaging_type | VARCHAR(50) | NOT NULL | 包装类型 |
| packaging_spec | VARCHAR(50) | NOT NULL | 包装规格 |
| barcode | VARCHAR(50) | NULL | 商品条码 |
| gross_weight | DECIMAL(10,3) | NULL | 规格毛重(kg) |
| volume | VARCHAR(50) | NULL | 规格体积 |
| retail_price | DECIMAL(10,2) | NULL | 建议零售价 |
| is_base | BOOLEAN | NOT NULL | 是否基础包装 |

### 7.3 商品图片表
| 字段名 | 数据类型 | 约束 | 描述 |
|-------|---------|------|------|
| image_id | BIGINT | PRIMARY KEY | 图片ID |
| product_id | BIGINT | FOREIGN KEY | 商品ID |
| image_url | VARCHAR(255) | NOT NULL | 图片URL |
| image_type | INT | NOT NULL | 图片类型(1-主图,2-详情图) |
| sort_order | INT | NOT NULL | 排序顺序 |

### 7.4 商品资质表
| 字段名 | 数据类型 | 约束 | 描述 |
|-------|---------|------|------|
| cert_id | BIGINT | PRIMARY KEY | 资质ID |
| product_id | BIGINT | FOREIGN KEY | 商品ID |
| cert_name | VARCHAR(100) | NOT NULL | 资质名称 |
| cert_url | VARCHAR(255) | NOT NULL | 资质文件URL |
| is_required | BOOLEAN | NOT NULL | 是否必填 |

## 8. 验收标准

### 8.1 功能验收

#### 8.1.1 商品发布功能
- ✅ 支持5种商品发布方式（手动录入、扫码录入、拷贝商品、导入商品、铺货管理）
- ✅ 表单字段完整，必填项有明确标识
- ✅ 支持实时表单验证和错误提示
- ✅ 支持保存草稿功能
- ✅ 支持四步流程导航和步骤切换

#### 8.1.2 商品唯一性校验
- ✅ 基于「商品名称+品牌+规格+生产厂家」进行唯一性校验
- ✅ 提交审核时自动触发校验
- ✅ 重复商品提示准确清晰

#### 8.1.3 平台商品库
- ✅ 支持按多种条件搜索商品库
- ✅ 支持从商品库中选择商品并复用其信息
- ✅ 审核通过的商品自动加入商品库

#### 8.1.4 图片和文件上传
- ✅ 支持商品主图和详情图上传
- ✅ 支持资质文件上传
- ✅ 提供图片和文件上传预览功能
- ✅ 支持图片排序和删除

#### 8.1.5 包装规格管理
- ✅ 支持添加/编辑/删除包装规格
- ✅ 至少包含一个不可删除的基础包装规格
- ✅ 包装规格信息完整

### 8.2 界面验收
- ✅ 页面布局合理，符合设计规范
- ✅ 响应式设计，适配PC端和移动端
- ✅ 操作流程直观，用户体验良好
- ✅ 视觉效果美观，符合品牌调性

### 8.3 性能验收
- ✅ 页面加载时间 ≤ 2秒
- ✅ 表单提交响应时间 ≤ 1秒
- ✅ 支持1000个并发用户

## 9. 风险和依赖

### 9.1 风险
- **商品信息合规风险**：商品信息可能存在不合规内容，需要加强审核机制
- **系统性能风险**：大量商品数据可能导致系统性能下降，需要优化数据库设计和查询
- **用户接受度风险**：新的商品发布流程可能需要用户适应，需要提供培训和帮助文档

### 9.2 依赖
- **后端服务**：需要后端提供商品信息存储、查询、校验等API接口
- **文件存储服务**：需要支持商品图片和资质文件的上传和存储
- **审核流程**：需要平台管理员配合制定商品审核标准和流程

## 10. 版本控制

| 版本 | 日期 | 变更内容 | 变更人 |
|------|------|---------|-------|
| V1.0 | 2023-06-01 | 初稿完成 | 产品经理 |
| V1.1 | 2023-06-05 | 补充商品唯一性校验机制 | 产品经理 |
| V1.2 | 2023-06-10 | 完善四步发布流程设计 | 产品经理 |
| V1.3 | 2023-06-15 | 增加平台商品库功能 | 产品经理 |

## 11. 附录

### 11.1 术语定义
- **商品档案**：商品的完整信息集合，包括基础信息、规格、包装、资质等
- **平台商品库**：平台统一管理的商品信息集合，用于商家引用和复用
- **商品唯一性**：基于「商品名称+品牌+规格+生产厂家」的唯一标识
- **四步发布流程**：商品发布的四个阶段，包括商品信息填写、包装规格设置、价格库存设置、资质图片上传

### 11.2 参考资料
- 农业电商平台商品管理规范
- 农药管理条例
- 化肥产品质量标准
- 种子法相关规定

### 11.3 联系方式
- 产品经理：XXX
- 技术负责人：XXX
- 设计负责人：XXX